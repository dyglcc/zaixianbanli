package qfpay.wxshop.getui;import qfpay.wxshop.R;import qfpay.wxshop.data.net.ConstValue;import qfpay.wxshop.ui.main.MainActivity;import android.app.Notification;import android.app.NotificationManager;import android.app.PendingIntent;import android.content.BroadcastReceiver;import android.content.Context;import android.content.Intent;import android.content.SharedPreferences;import android.widget.Toast;public class AlarmReceiver extends BroadcastReceiver {	@Override	public void onReceive(Context arg0, Intent arg1) {		int days = canNotify(arg0);		try {			notifies(arg0, days);		} catch (ClassNotFoundException e) {			e.printStackTrace();		}	}	SharedPreferences prefer = null;	private int canNotify(Context context) {		if (MainActivity.running == true) {			return 0;		}		prefer = context.getSharedPreferences("Data", 0);		long oldTime = prefer.getLong("openApptime", 0);		long now = System.currentTimeMillis();		long extra = now - oldTime;		return (int) (extra / ConstValue.oneDay);	}	private void notifies(Context context, int i) throws ClassNotFoundException {				String text = "";		if (i == 2) {			text = "大人，真的不考虑用我赚点零花钱(ㄒoㄒ)？";		} else if (i == 4) {			text = "大人，看我一眼！我真的能赚钱 O(∩_∩)O";		} else if (i == 7) {			text = "死鬼，一天都不来看仁家Q_Q ，说好的爱呢？";		} else if (i > 7 && i % 7 == 0) {			text = "看看其他美女店主是怎么赚钱的";		} else {			return;		}				Toast.makeText(context, "文本：" + text,				Toast.LENGTH_LONG).show();		String ns = Context.NOTIFICATION_SERVICE;		NotificationManager mNotificationManager = (NotificationManager) context				.getSystemService(ns);		// 定义通知栏展现的内容信息		int icon = R.drawable.push;		CharSequence tickerText = "喵喵微店消息";		long when = System.currentTimeMillis();		Notification notification = new Notification(icon, tickerText, when);		// 定义下拉通知栏时要展现的内容信息		CharSequence contentTitle = "喵喵微店";		CharSequence contentText = text;		Intent notificationIntent = new Intent(context, Class.forName("qfpay.wxshop.ui.main.MainActivity_"));		notificationIntent.putExtra("daysWhenClick", i);		notification.flags |= Notification.FLAG_AUTO_CANCEL;		notificationIntent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);		PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);		notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);		// 用mNotificationManager的notify方法通知用户生成标题栏消息通知		mNotificationManager.notify(1002, notification);	}}